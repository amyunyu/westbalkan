<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>西巴爾幹半島之旅 2026</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'morandi-bg': '#F9F7F2', // 米白底色
                        'morandi-yellow': '#F2E6D6', // 淡黃/杏色
                        'morandi-green': '#D2D9D1', // 灰綠
                        'morandi-dark': '#4A4A48', // 深灰字體
                        'morandi-accent': '#BFAFA6', // 藕粉棕
                        'morandi-card': '#FFFFFF',
                    },
                    fontFamily: {
                        'serif': ['"Noto Serif TC"', 'serif'],
                        'sans': ['"Lato"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #eee;
            font-family: 'Noto Serif TC', serif;
        }
        .app-container {
            max-width: 430px; /* 手機寬度模擬 */
            margin: 0 auto;
            min-height: 100vh;
            background-color: #F9F7F2;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        /* 隱藏 Scrollbar 但保持功能 */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .slide-enter-active, .slide-leave-active {
            transition: transform 0.3s ease;
        }
        .slide-enter-from, .slide-leave-to {
            transform: translateX(100%);
        }
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
    </style>
</head>
<body>

<div id="app" class="app-container text-morandi-dark flex flex-col h-screen">

    <header class="pt-8 pb-4 px-6 bg-morandi-bg sticky top-0 z-10">
        <h1 class="text-2xl font-bold tracking-widest text-gray-700">西巴爾幹半島</h1>
        <p class="text-xs tracking-[0.2em] text-gray-500 mt-1 uppercase">My Journey • 2026</p>
    </header>

    <main class="flex-1 overflow-y-auto hide-scrollbar pb-24 relative">

        <div v-if="currentTab === 'itinerary' && !selectedDetail">
            
            <div class="flex overflow-x-auto hide-scrollbar px-4 mb-6 space-x-3 snap-x">
                <div 
                    v-for="(day, index) in tripDates" 
                    :key="index"
                    @click="selectDate(index)"
                    class="flex-shrink-0 w-[70px] h-[90px] rounded-t-full rounded-b-full flex flex-col items-center justify-center snap-center transition-all duration-300 cursor-pointer border border-gray-100 shadow-sm"
                    :class="currentDateIndex === index ? 'bg-morandi-yellow text-gray-800 transform scale-105 border-morandi-accent' : 'bg-white text-gray-400'"
                >
                    <span class="text-xs font-sans mb-1">Day {{ index + 1 }}</span>
                    <span class="text-xl font-bold font-sans">{{ day.dateStr }}</span>
                    <span class="text-xs mt-1">{{ day.weekStr }}</span>
                </div>
            </div>

            <div class="px-6 mb-6">
                <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 flex items-center justify-between">
                    <div>
                        <h2 class="text-lg font-bold mb-1">今日天氣</h2>
                        <div class="flex items-baseline">
                            <span class="text-3xl font-sans font-light mr-2">{{ currentDayData.weather.temp }}°C</span>
                            <span class="text-sm text-gray-500">{{ currentDayData.weather.desc }}</span>
                        </div>
                    </div>
                    <div class="text-morandi-accent">
                        <i :data-lucide="currentDayData.weather.icon" width="40" height="40"></i>
                    </div>
                </div>
            </div>

            <div class="px-6 space-y-4">
                <div class="flex items-center mb-2">
                    <div class="h-4 w-1 bg-morandi-accent mr-3 rounded-full"></div>
                    <h3 class="text-lg font-bold">當日行程</h3>
                </div>

                <div 
                    v-for="(item, idx) in currentDayData.activities" 
                    :key="idx"
                    class="bg-white rounded-xl p-4 shadow-sm border border-gray-50 relative group transition-transform active:scale-95"
                    @click="openDetail(item)"
                >
                    <div class="flex items-start">
                        <div class="bg-morandi-bg p-3 rounded-full mr-4 text-gray-600">
                            <i :data-lucide="item.typeIcon" width="20" height="20"></i>
                        </div>
                        
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800 text-lg mb-1">{{ item.title }}</h4>
                            <p class="text-sm text-gray-500 mb-1 leading-relaxed">{{ item.note }}</p>
                            <span class="text-xs bg-morandi-yellow px-2 py-0.5 rounded text-gray-600 inline-block mt-1">
                                {{ item.time }}
                            </span>
                        </div>

                        <a 
                            :href="'https://www.google.com/maps/search/?api=1&query=' + item.title" 
                            target="_blank"
                            @click.stop
                            class="absolute top-4 right-4 text-morandi-accent hover:text-red-400 transition-colors"
                        >
                            <i data-lucide="map-pin" width="24" height="24" fill="currentColor" class="opacity-20 hover:opacity-100"></i>
                            <i data-lucide="map-pin" width="24" height="24" class="absolute top-0 left-0"></i>
                        </a>
                    </div>
                </div>

                <div v-if="currentDayData.activities.length === 0" class="text-center py-10 text-gray-400">
                    <i data-lucide="coffee" class="mx-auto mb-2 opacity-50"></i>
                    <p>今天享受自由時光，沒有排定行程。</p>
                </div>
            </div>
        </div>

        <transition name="slide">
            <div v-if="selectedDetail" class="fixed inset-0 bg-white z-50 overflow-y-auto app-container">
                <div class="h-48 bg-morandi-green relative flex items-end p-6">
                    <button @click="selectedDetail = null" class="absolute top-6 left-6 bg-white/80 p-2 rounded-full shadow-sm hover:bg-white transition">
                        <i data-lucide="arrow-left" width="24" height="24"></i>
                    </button>
                    <h2 class="text-3xl font-bold text-white shadow-black drop-shadow-md">{{ selectedDetail.title }}</h2>
                </div>

                <div class="p-8">
                    <div class="flex items-center mb-6 space-x-2">
                         <span class="px-3 py-1 bg-morandi-yellow text-xs rounded-full text-gray-700">歷史古蹟</span>
                         <span class="px-3 py-1 bg-gray-100 text-xs rounded-full text-gray-500">推薦必訪</span>
                    </div>

                    <h3 class="text-xl font-bold mb-3 border-l-4 border-morandi-accent pl-3">景點介紹</h3>
                    <p class="text-gray-600 leading-relaxed mb-8 text-justify">
                        {{ selectedDetail.description || '這裡是一個非常美麗的地方，擁有豐富的歷史文化背景。建議您可以花上 1-2 小時慢慢遊覽，感受當地的獨特氛圍。' }}
                        <br><br>
                        西巴爾幹半島的建築特色在這裡展露無遺，融合了東西方的文化色彩。
                    </p>

                    <h3 class="text-xl font-bold mb-3 border-l-4 border-morandi-accent pl-3">推薦選項</h3>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center text-gray-600 bg-morandi-bg p-3 rounded-lg">
                            <i data-lucide="camera" class="mr-3 text-morandi-accent" width="18"></i>
                            <span>在舊城區牆邊拍攝夕陽</span>
                        </li>
                        <li class="flex items-center text-gray-600 bg-morandi-bg p-3 rounded-lg">
                            <i data-lucide="utensils" class="mr-3 text-morandi-accent" width="18"></i>
                            <span>品嚐當地特釀白酒</span>
                        </li>
                    </ul>
                    
                    <a :href="'https://www.google.com/maps/search/?api=1&query=' + selectedDetail.title" target="_blank" class="block w-full text-center bg-morandi-dark text-white py-4 rounded-xl shadow-lg hover:bg-gray-800 transition">
                        開啟 Google Maps 導航
                    </a>
                </div>
            </div>
        </transition>

        <div v-if="currentTab === 'info'" class="px-6 animate-fade-in">
            <h2 class="text-xl font-bold mb-6 mt-2 border-l-4 border-morandi-yellow pl-3">航班資訊</h2>
            
            <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-4 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-morandi-green text-white text-xs px-3 py-1 rounded-bl-xl">去程</div>
                <div class="flex justify-between items-center mb-4">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-gray-800">TPE</div>
                        <div class="text-xs text-gray-400">台北桃園</div>
                    </div>
                    <div class="flex-1 px-4 text-center">
                        <i data-lucide="plane-takeoff" class="mx-auto text-morandi-accent mb-1"></i>
                        <div class="h-[1px] bg-gray-300 w-full"></div>
                        <div class="text-xs text-gray-400 mt-1">轉機杜拜</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-gray-800">ZAG</div>
                        <div class="text-xs text-gray-400">薩格勒布</div>
                    </div>
                </div>
                <div class="flex justify-between text-sm text-gray-600 bg-morandi-bg p-3 rounded-lg">
                    <span>2026/05/24 23:35</span>
                    <span class="font-bold">阿聯酋航空 EK367</span>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-8 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-morandi-accent text-white text-xs px-3 py-1 rounded-bl-xl">回程</div>
                <div class="flex justify-between items-center mb-4">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-gray-800">DBV</div>
                        <div class="text-xs text-gray-400">杜布羅夫尼克</div>
                    </div>
                    <div class="flex-1 px-4 text-center">
                        <i data-lucide="plane-landing" class="mx-auto text-morandi-accent mb-1"></i>
                        <div class="h-[1px] bg-gray-300 w-full"></div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-gray-800">TPE</div>
                        <div class="text-xs text-gray-400">台北桃園</div>
                    </div>
                </div>
                <div class="flex justify-between text-sm text-gray-600 bg-morandi-bg p-3 rounded-lg">
                    <span>2026/06/11 15:20</span>
                    <span class="font-bold">阿聯酋航空 EK368</span>
                </div>
            </div>

            <h2 class="text-xl font-bold mb-4 border-l-4 border-morandi-yellow pl-3">住宿清單</h2>
            <div class="bg-white rounded-xl p-4 shadow-sm mb-2 flex items-center">
                <i data-lucide="hotel" class="mr-3 text-morandi-accent"></i>
                <div>
                    <h4 class="font-bold">Hotel Esplanade</h4>
                    <p class="text-xs text-gray-500">Zagreb • 5/25 - 5/27</p>
                </div>
            </div>
            <div class="bg-white rounded-xl p-4 shadow-sm mb-2 flex items-center">
                <i data-lucide="hotel" class="mr-3 text-morandi-accent"></i>
                <div>
                    <h4 class="font-bold">Villa Dubrovnik</h4>
                    <p class="text-xs text-gray-500">Dubrovnik • 6/08 - 6/11</p>
                </div>
            </div>
        </div>

    </main>

    <nav class="bg-white border-t border-gray-200 h-20 flex justify-around items-center absolute bottom-0 w-full z-40 pb-2">
        <button 
            @click="switchTab('itinerary')" 
            class="flex flex-col items-center justify-center w-full h-full transition-colors"
            :class="currentTab === 'itinerary' ? 'text-gray-800' : 'text-gray-400'"
        >
            <i data-lucide="map" width="24" height="24" :stroke-width="currentTab === 'itinerary' ? 2.5 : 2"></i>
            <span class="text-xs mt-1 font-medium">每日行程</span>
        </button>
        <button 
            @click="switchTab('info')" 
            class="flex flex-col items-center justify-center w-full h-full transition-colors"
            :class="currentTab === 'info' ? 'text-gray-800' : 'text-gray-400'"
        >
            <i data-lucide="ticket" width="24" height="24" :stroke-width="currentTab === 'info' ? 2.5 : 2"></i>
            <span class="text-xs mt-1 font-medium">旅遊資訊</span>
        </button>
    </nav>

</div>

<script>
    const { createApp, ref, computed, onMounted, nextTick } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const currentDateIndex = ref(0);
            const selectedDetail = ref(null);
            
            // 生成日期資料 5/24 - 6/12
            const generateDates = () => {
                const dates = [];
                const startDate = new Date('2026-05-24');
                const endDate = new Date('2026-06-12');
                const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                
                let current = new Date(startDate);
                while (current <= endDate) {
                    dates.push({
                        dateObj: new Date(current),
                        dateStr: `${current.getMonth() + 1}/${current.getDate()}`,
                        weekStr: weekDays[current.getDay()],
                        fullDate: current.toISOString().split('T')[0]
                    });
                    current.setDate(current.getDate() + 1);
                }
                return dates;
            };

            const tripDates = generateDates();

            // 模擬行程資料庫
            // 這裡你可以根據真實行程修改
            const itineraryData = {
                '2026-05-24': {
                    weather: { temp: 24, icon: 'cloud-sun', desc: '舒適' },
                    activities: [
                        { title: '桃園機場出發', time: '23:05', note: 'EK367 飛往杜拜轉機', typeIcon: 'plane', description: '準備開始美好的旅程！記得檢查護照與簽證。' }
                    ]
                },
                '2026-05-25': {
                    weather: { temp: 20, icon: 'cloud-rain', desc: '偶雨' },
                    activities: [
                        { title: '抵達薩格勒布', time: '14:30', note: '領取租車，前往飯店 Check-in', typeIcon: 'car-front', description: '克羅埃西亞首都，充滿歷史氛圍的城市。' },
                        { title: '耶拉齊洽廣場', time: '17:00', note: '市中心散步、換匯', typeIcon: 'landmark', description: '薩格勒布的主廣場，周邊有許多咖啡廳與商店。' },
                        { title: 'Tkalčićeva 街晚餐', time: '19:00', note: '推薦 Agava 餐廳', typeIcon: 'utensils', description: '這條街是薩格勒布最熱鬧的餐廳酒吧街。' }
                    ]
                },
                '2026-05-26': {
                    weather: { temp: 22, icon: 'sun', desc: '晴朗' },
                    activities: [
                        { title: '聖馬可教堂', time: '09:30', note: '必拍彩色馬賽克屋頂', typeIcon: 'camera', description: '哥德式建築，屋頂上有克羅埃西亞王國的徽章。' },
                        { title: '失戀博物館', time: '11:00', note: '提前預約門票', typeIcon: 'heart-crack', description: '展示前任情侶留下的物品，充滿故事的博物館。' },
                        { title: '前往盧比安納', time: '14:00', note: '車程約 2 小時 (斯洛維尼亞)', typeIcon: 'car', description: '跨越國境前往斯洛維尼亞首都。' }
                    ]
                },
                '2026-06-11': {
                    weather: { temp: 28, icon: 'sun', desc: '炎熱' },
                    activities: [
                        { title: '杜布羅夫尼克機場', time: '12:00', note: '辦理退稅、登機', typeIcon: 'plane', description: '結束美好的巴爾幹之旅。' }
                    ]
                },
                '2026-06-12': {
                    weather: { temp: 25, icon: 'home', desc: '溫暖' },
                    activities: [
                        { title: '抵達台灣', time: '16:00', note: '甜蜜的家', typeIcon: 'home', description: '歡迎回家！' }
                    ]
                }
            };

            // 預設空白日期的資料
            const defaultDayData = {
                weather: { temp: 23, icon: 'sun', desc: '晴時多雲' },
                activities: []
            };

            // 計算屬性：取得當前選定日期的資料
            const currentDayData = computed(() => {
                const dateKey = tripDates[currentDateIndex.value].fullDate;
                return itineraryData[dateKey] || defaultDayData;
            });

            const selectDate = (index) => {
                currentDateIndex.value = index;
                selectedDetail.value = null; // 切換日期時關閉詳情
                // 重新渲染 icon
                nextTick(() => {
                    lucide.createIcons();
                });
            };

            const openDetail = (item) => {
                selectedDetail.value = item;
            };

            const switchTab = (tab) => {
                currentTab.value = tab;
                selectedDetail.value = null;
                nextTick(() => {
                    lucide.createIcons();
                });
            };

            onMounted(() => {
                lucide.createIcons();
            });

            // 監聽詳細頁面打開，重新渲染 icon (為了返回按鈕)
            Vue.watch(selectedDetail, () => {
                nextTick(() => {
                    lucide.createIcons();
                });
            });

            return {
                tripDates,
                currentDateIndex,
                currentDayData,
                selectDate,
                openDetail,
                selectedDetail,
                currentTab,
                switchTab
            };
        }
    }).mount('#app');
</script>

</body>
</html>
